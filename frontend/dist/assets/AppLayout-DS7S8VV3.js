import{d as j,u as q,r as w,i as D,n as G,h as K,w as y,p as k,q as O,f as t,g as n,e,b as l,j as u,s as Y,t as $,v as F,l as x,x as f,y as H,z as J,m as b,o as P,_ as Q}from"./index-DznQeGOr.js";const U={class:"header-right"},X={class:"user-entry"},Z={class:"username"},v="urban-rail-active-menu",ee=j({__name:"AppLayout",setup(te){const r=q(),p=K(),c=D(),_=w(c.path.startsWith("/app")?c.path:"/app/device");G(()=>{const a=localStorage.getItem(v);a&&(_.value=a,a!==c.path&&p.replace(a).catch(()=>{}))}),y(()=>c.path,a=>{a.startsWith("/app")&&(_.value=a,localStorage.setItem(v,a))});const S=a=>{p.push(a)},C=k(()=>r.role==="admin"?"管理员":"普通用户"),A=k(()=>{var a;return((a=r.username)==null?void 0:a.charAt(0))??"访"}),I=()=>{r.logout(),localStorage.removeItem(v),p.push("/login"),b.success("您已退出系统")},s=w("light"),i=()=>{const a=document.body;a.setAttribute("data-theme",s.value),s.value==="dark"?(a.style.backgroundColor="#101828",a.style.color="#f8fafc"):(a.style.backgroundColor="#f2f4f8",a.style.color="var(--text-color)")},L=()=>{s.value=s.value==="light"?"dark":"light",i(),b.info(`切换为${s.value==="dark"?"暗色":"亮色"}主题`)};return y(s,()=>i()),i(),(a,o)=>{const d=n("el-icon"),m=n("el-menu-item"),M=n("el-menu"),T=n("el-aside"),B=n("el-tag"),E=n("el-avatar"),g=n("el-dropdown-item"),N=n("el-dropdown-menu"),R=n("el-dropdown"),V=n("el-header"),z=n("router-view"),W=n("el-main"),h=n("el-container");return P(),O(h,{class:"app-shell"},{default:t(()=>[e(T,{width:"240px",class:"app-aside"},{default:t(()=>[o[3]||(o[3]=l("div",{class:"logo"},"城市轨道交通供电设备状态评估系统",-1)),e(M,{"default-active":_.value,class:"nav-menu","background-color":"transparent",onSelect:S},{default:t(()=>[e(m,{index:"/app/device"},{default:t(()=>[e(d,null,{default:t(()=>[e(u(Y))]),_:1}),o[0]||(o[0]=l("span",null,"设备管理",-1))]),_:1}),e(m,{index:"/app/eval"},{default:t(()=>[e(d,null,{default:t(()=>[e(u($))]),_:1}),o[1]||(o[1]=l("span",null,"设备评估",-1))]),_:1}),e(m,{index:"/app/settings"},{default:t(()=>[e(d,null,{default:t(()=>[e(u(F))]),_:1}),o[2]||(o[2]=l("span",null,"系统设置",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),e(h,null,{default:t(()=>[e(V,{class:"app-header"},{default:t(()=>[o[6]||(o[6]=l("div",{class:"header-left"},[l("h1",null,"城市轨道交通供电设备状态评估系统")],-1)),l("div",U,[e(B,{type:"info",effect:"dark",class:"role-tag"},{default:t(()=>[x(" 当前角色："+f(C.value),1)]),_:1}),e(R,{trigger:"click"},{dropdown:t(()=>[e(N,null,{default:t(()=>[e(g,{onClick:L},{default:t(()=>[e(d,null,{default:t(()=>[e(u(H))]),_:1}),o[4]||(o[4]=l("span",null,"主题切换",-1))]),_:1}),e(g,{divided:"",onClick:I},{default:t(()=>[e(d,null,{default:t(()=>[e(u(J))]),_:1}),o[5]||(o[5]=l("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[l("span",X,[e(E,{size:"small"},{default:t(()=>[x(f(A.value),1)]),_:1}),l("span",Z,f(u(r).username),1)])]),_:1})])]),_:1}),e(W,{class:"app-main"},{default:t(()=>[e(z)]),_:1})]),_:1})]),_:1})}}}),oe=Q(ee,[["__scopeId","data-v-ae3a1aac"]]);export{oe as default};
