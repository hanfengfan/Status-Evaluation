import{d as k,u as x,r as i,a as C,w as E,c as R,b,e as a,f as o,g as l,h as q,i as B,o as N,j as T,E as U,k as K,l as L,m as S,_ as j}from"./index-DznQeGOr.js";const z={class:"login-wrapper"},A=k({__name:"Login",setup(F){const g=q(),w=B(),v=x(),r=i("user"),u=i(!1),s=C({username:"",password:""}),c=i(),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};E(r,()=>{s.username="",s.password=""});const _=()=>{var d;(d=c.value)==null||d.validate(async e=>{if(e){u.value=!0;try{await new Promise(m=>setTimeout(m,600)),v.login({username:s.username,role:r.value}),S.success("登录成功，欢迎回来");const n=w.query.redirect??"/app";g.push(n)}finally{u.value=!1}}})};return(d,e)=>{const n=l("el-tab-pane"),m=l("el-tabs"),f=l("el-input"),p=l("el-form-item"),y=l("el-button"),h=l("el-card");return N(),R("div",z,[e[4]||(e[4]=b("div",{class:"login-header"},[b("h1",null,"城市轨道交通供电设备状态评估系统")],-1)),a(h,{class:"login-card",shadow:"always"},{default:o(()=>[a(m,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"login-tabs"},{default:o(()=>[a(n,{label:"用户登录",name:"user"}),a(n,{label:"管理员登录",name:"admin"})]),_:1},8,["modelValue"]),a(T(U),{ref_key:"formRef",ref:c,model:s,rules:V,"label-position":"top",onKeyup:K(_,["enter"])},{default:o(()=>[a(p,{label:"用户名",prop:"username"},{default:o(()=>[a(f,{modelValue:s.username,"onUpdate:modelValue":e[1]||(e[1]=t=>s.username=t),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])]),_:1}),a(p,{label:"密码",prop:"password"},{default:o(()=>[a(f,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.password=t),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),a(p,null,{default:o(()=>[a(y,{type:"primary",size:"large",class:"submit-btn",loading:u.value,onClick:_},{default:o(()=>[...e[3]||(e[3]=[L(" 进入系统 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),M=j(A,[["__scopeId","data-v-048b3ace"]]);export{M as default};
